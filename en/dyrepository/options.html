<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DyRepository Configuration | SmartSql</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="description" content="High performance, high productivity, ultra lightweight ORM. SmartSql = MyBatis + Cache(Memory | Redis) + R/W Splitting +Dynamic Repository + Diagnostics">
    <meta name="keywords" content="SmartSql, MyBatis ,Cache(Memory | Redis) ,ZooKeeper , R/W Splitting , Dynamic Repository,ORM,DotNet,.Net,dotnet core">
    <link rel="preload" href="/assets/css/0.styles.2272f8e8.css" as="style"><link rel="preload" href="/assets/js/app.b764d23b.js" as="script"><link rel="preload" href="/assets/js/2.f0de6cf5.js" as="script"><link rel="preload" href="/assets/js/27.4a33ea03.js" as="script"><link rel="prefetch" href="/assets/js/10.d23fef41.js"><link rel="prefetch" href="/assets/js/11.3173be70.js"><link rel="prefetch" href="/assets/js/12.00fd90ec.js"><link rel="prefetch" href="/assets/js/13.3c8cdac2.js"><link rel="prefetch" href="/assets/js/14.29f7b193.js"><link rel="prefetch" href="/assets/js/15.41fb704e.js"><link rel="prefetch" href="/assets/js/16.054c6069.js"><link rel="prefetch" href="/assets/js/17.278debea.js"><link rel="prefetch" href="/assets/js/18.69165377.js"><link rel="prefetch" href="/assets/js/19.661a7ba4.js"><link rel="prefetch" href="/assets/js/20.b4579faa.js"><link rel="prefetch" href="/assets/js/21.171ad768.js"><link rel="prefetch" href="/assets/js/22.78eb6e8e.js"><link rel="prefetch" href="/assets/js/23.8edbdee3.js"><link rel="prefetch" href="/assets/js/24.06f1433e.js"><link rel="prefetch" href="/assets/js/25.dbd8c249.js"><link rel="prefetch" href="/assets/js/26.58464561.js"><link rel="prefetch" href="/assets/js/28.02a6c185.js"><link rel="prefetch" href="/assets/js/29.b9d070ca.js"><link rel="prefetch" href="/assets/js/3.da7287ed.js"><link rel="prefetch" href="/assets/js/30.1cff4cee.js"><link rel="prefetch" href="/assets/js/31.6e505c47.js"><link rel="prefetch" href="/assets/js/32.64930bed.js"><link rel="prefetch" href="/assets/js/33.a3bff542.js"><link rel="prefetch" href="/assets/js/34.2ccd7fce.js"><link rel="prefetch" href="/assets/js/35.683f41dd.js"><link rel="prefetch" href="/assets/js/36.a7b51a3f.js"><link rel="prefetch" href="/assets/js/37.29ea3196.js"><link rel="prefetch" href="/assets/js/38.b2009c72.js"><link rel="prefetch" href="/assets/js/39.67b47111.js"><link rel="prefetch" href="/assets/js/4.03454347.js"><link rel="prefetch" href="/assets/js/40.08c3b24c.js"><link rel="prefetch" href="/assets/js/41.96c311cf.js"><link rel="prefetch" href="/assets/js/42.9a5fa5fd.js"><link rel="prefetch" href="/assets/js/43.38ceb0af.js"><link rel="prefetch" href="/assets/js/44.5bf1c228.js"><link rel="prefetch" href="/assets/js/45.7e5d0694.js"><link rel="prefetch" href="/assets/js/46.dbff50bb.js"><link rel="prefetch" href="/assets/js/47.e39d468e.js"><link rel="prefetch" href="/assets/js/48.eef30ad8.js"><link rel="prefetch" href="/assets/js/49.299b8748.js"><link rel="prefetch" href="/assets/js/5.3f3b5b73.js"><link rel="prefetch" href="/assets/js/6.b5cdff4e.js"><link rel="prefetch" href="/assets/js/7.e6032164.js"><link rel="prefetch" href="/assets/js/8.06d8af1f.js"><link rel="prefetch" href="/assets/js/9.a2894045.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2272f8e8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">SmartSql</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/en/config/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en/dyrepository/" class="nav-link router-link-active">
  Dynamic Repository
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FAQ" class="dropdown-title"><span class="title">FAQ</span> <span class="arrow down"></span></button> <button type="button" aria-label="FAQ" class="mobile-dropdown-title"><span class="title">FAQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/faq/" class="nav-link">
  Common Problems
</a></li><li class="dropdown-item"><!----> <a href="/en/faq/performance-test/" class="nav-link">
  Performance evaluation
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/dotnetcore/SmartSql/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Update history
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Smart-Kit/SmartCode" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SmartCode
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dyrepository/options.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/dyrepository/options.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/Smart-Kit/SmartSql" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/en/config/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en/dyrepository/" class="nav-link router-link-active">
  Dynamic Repository
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FAQ" class="dropdown-title"><span class="title">FAQ</span> <span class="arrow down"></span></button> <button type="button" aria-label="FAQ" class="mobile-dropdown-title"><span class="title">FAQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/faq/" class="nav-link">
  Common Problems
</a></li><li class="dropdown-item"><!----> <a href="/en/faq/performance-test/" class="nav-link">
  Performance evaluation
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/dotnetcore/SmartSql/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Update history
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Smart-Kit/SmartCode" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SmartCode
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dyrepository/options.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/dyrepository/options.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/Smart-Kit/SmartSql" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/en/dyrepository/" aria-current="page" class="sidebar-link">Dynamic Agent Repository</a></li><li><a href="/en/dyrepository/options.html" aria-current="page" class="active sidebar-link">DyRepository Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/dyrepository/options.html#required-configuration" class="sidebar-link">Required Configuration:</a></li><li class="sidebar-sub-header"><a href="/en/dyrepository/options.html#optional-configuration" class="sidebar-link">Optional configuration</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dyrepository-configuration"><a href="#dyrepository-configuration" class="header-anchor">#</a> DyRepository Configuration</h1> <p>The DyRepository configuration is divided into default configuration, feature configuration, and registration configuration, but both must be configured for IoC registration because it is necessary to create a dynamic interface implementation into the IoC.</p> <h2 id="required-configuration"><a href="#required-configuration" class="header-anchor">#</a> Required Configuration:</h2> <ol><li>Single Registration</li></ol> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddRepository</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IUserRepository<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>Bulk Registration</li></ol> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    services<span class="token punctuation">.</span><span class="token function">AddSmartSqlRepositoryFromAssembly</span><span class="token punctuation">(</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//Full name of the assembly where the warehousing interface resides</span>
        options<span class="token punctuation">.</span>AssemblyString <span class="token operator">=</span> <span class="token string">&quot;SmartSql.Starter.Repository&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="optional-configuration"><a href="#optional-configuration" class="header-anchor">#</a> Optional configuration</h2> <p>Feature configuration refers to the configuration items that are labeled on the interface to configure DyRepository, while the registration configuration refers to the configuration in the IoC registration method, and the following shows the difference between the two.</p> <h3 id="scope-configuration"><a href="#scope-configuration" class="header-anchor">#</a> Scope configuration</h3> <h4 id="scene"><a href="#scene" class="header-anchor">#</a> Scene</h4> <p>I{Scope}Repository is the default configuration of the Scope template, such as IUserRepository Scope is User.
If this is the interface naming style, there is no need to reconfigure it. When you need to change the interface naming style, such as query User's DAO layer name is IUserDao, you need to configure the corresponding Scope.</p> <h4 id="feature-configuration"><a href="#feature-configuration" class="header-anchor">#</a> Feature configuration</h4> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SqlMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Scope <span class="token operator">=</span> <span class="token string">&quot;User&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserDao</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="registering-a-configuration"><a href="#registering-a-configuration" class="header-anchor">#</a> Registering a configuration</h4> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token comment">//Interface or that interface?</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserDao</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//In the IoC configuration, register a single interface</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddRepository</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IUserDao<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token named-parameter punctuation">scope</span><span class="token punctuation">:</span><span class="token string">&quot;User&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//Or Bulk Registration</span>
    services<span class="token punctuation">.</span><span class="token function">AddSmartSqlRepositoryFromAssembly</span><span class="token punctuation">(</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>AssemblyString <span class="token operator">=</span> <span class="token string">&quot;SmartSql.Starter.Repository&quot;</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span>ScopeTemplate <span class="token operator">=</span> <span class="token string">&quot;I{Scope}Dao&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Note that AddSmartSqlRepositoryFromAssembly can be configured multiple times, and you can configure different properties for different interfaces as long as the interfaces you are scanned to are different</p> <h3 id="sqlid-configuration"><a href="#sqlid-configuration" class="header-anchor">#</a> SqlId Configuration</h3> <p><strong>SqlId default is the method name for the warehousing interface, and no configuration is required as long as the method name is the same as the SqlId in the XML.</strong></p> <h4 id="scene-2"><a href="#scene-2" class="header-anchor">#</a> Scene</h4> <p>Because the SQL configuration of SmartSql can be rendered dynamically, different query conditions can be rendered when the same SqlId is passed in with different parameters. For example:</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Query<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      SELECT * FROM User T
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>And<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Email<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          T.Email = @Email
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>And<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          T.UserName Like Concat('%',$UserName,'%')
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>At this point, if you only use the default configuration, writing the two Query (string) method will have the same method name and parameter type can not be overloaded problem.
Therefore, the interface method name needs to be different at this time, and the same SqlId is specified by configuration.</p> <h4 id="attribute-configuration"><a href="#attribute-configuration" class="header-anchor">#</a> Attribute configuration</h4> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SqlMap</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Scope <span class="token operator">=</span> <span class="token string">&quot;User&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserRepository</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Statement</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Id <span class="token operator">=</span> <span class="token string">&quot;Query&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">QueryByEmail</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Statement</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Id <span class="token operator">=</span> <span class="token string">&quot;Query&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">QueryByUserName</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="registering-a-configuration-2"><a href="#registering-a-configuration-2" class="header-anchor">#</a> Registering a configuration</h4> <p>The registration configuration is achieved by configuring a delegate parameter called sqlIdNamingConvert to implement the conversion method named to SqlId by the interface method.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    services<span class="token punctuation">.</span><span class="token function">AddSmartSqlRepositoryFactory</span><span class="token punctuation">(</span><span class="token named-parameter punctuation">sqlIdNamingConvert</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>type<span class="token punctuation">,</span> method<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span>Name<span class="token punctuation">.</span><span class="token function">StartsWith</span><span class="token punctuation">(</span><span class="token string">&quot;QueryBy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Query&quot;</span><span class="token punctuation">;</span> <span class="token comment">//It's SqlId back.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token function">AddRepositoryFromAssembly</span><span class="token punctuation">(</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>AssemblyString <span class="token operator">=</span> <span class="token string">&quot;SmartSql.Starter.Repository&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>It is important to note that this configuration needs to separate the AddSmartSqlRepositoryFactory and AddRepositoryFromAssembly two methods, The reason is that AddSmartSqlRepositoryFactory has been called inside the AddSmartSqlRepositoryFromAssembly method in the previous configuration, and if it is called again, it can cause a conflict.</p> <h3 id="other-configurations"><a href="#other-configurations" class="header-anchor">#</a> Other configurations</h3> <h4 id="scene-3"><a href="#scene-3" class="header-anchor">#</a> Scene</h4> <p>If you want SmartSql to do only the interface implementation without invading the interface, the above registration configuration can basically meet most of the requirements.</p> <p>But if you need to drill down into SmartSql, you can get more extra functionality with feature configuration and a generic interface.</p> <h4 id="interface-method-specifies-sql"><a href="#interface-method-specifies-sql" class="header-anchor">#</a> Interface method Specifies SQL</h4> <p>That is, directly to the interface method to bind SQL, no longer need to configure SQL from the XML, but note that the parameter prefix still needs to be configured in the corresponding configuration file.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Statement</span><span class="token attribute-arguments"><span class="token punctuation">(</span>Sql <span class="token operator">=</span> <span class="token string">&quot;Select Top(@taken) T.* From User T With(NoLock);&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> <span class="token function">QueryBySql</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> taken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The statement attribute is marked only on the method, and there are several other parameters:</p> <table><thead><tr><th style="text-align:center;">Parameters</th> <th style="text-align:center;">Default value</th> <th style="text-align:center;">Note</th></tr></thead> <tbody><tr><td style="text-align:center;">Scope</td> <td style="text-align:center;">Scope of the current interface</td> <td style="text-align:center;">Scope corresponding to XML</td></tr> <tr><td style="text-align:center;">Id</td> <td style="text-align:center;">Method name</td> <td style="text-align:center;">Id of XML corresponding to Statement</td></tr> <tr><td style="text-align:center;">Execute</td> <td style="text-align:center;">ExecuteBehavior.Auto</td> <td style="text-align:center;">Execution type, general default is good</td></tr> <tr><td style="text-align:center;">Sql</td> <td style="text-align:center;">None</td> <td style="text-align:center;">When you configure SQL, SQL is executed directly on this feature</td></tr></tbody></table> <h4 id="specifying-query-parameters"><a href="#specifying-query-parameters" class="header-anchor">#</a> Specifying query parameters</h4> <p>That is, parameters that specify the parameter name when passing the parameter value of the interface method to SQL rendering, such as passing the value of the ID to the@UserId：</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token return-type class-name">IEnumerable<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span> <span class="token function">Query</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Param</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;UserId&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="generic-interface"><a href="#generic-interface" class="header-anchor">#</a> Generic interface</h4> <p>After inheriting the generic interface, the CURD common method inside it can be called directly.</p> <ol><li>Synchronous calls:<code>IRepository&lt;TEntity, TPrimary&gt;</code></li> <li>Asynchronous Call:<code>IRepositoryAsync&lt;TEntity, TPrimary&gt;</code></li></ol></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Smart-Kit/SmartSql-Docs/edit/master/docs/en/dyrepository/options.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/28/2019, 3:16:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/dyrepository/" class="prev router-link-active">
        Dynamic Agent Repository
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.b764d23b.js" defer></script><script src="/assets/js/2.f0de6cf5.js" defer></script><script src="/assets/js/27.4a33ea03.js" defer></script>
  </body>
</html>
