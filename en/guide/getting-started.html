<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guide | SmartSql</title>
    <meta name="generator" content="VuePress 1.6.0">
    <link rel="icon" href="/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="description" content="High performance, high productivity, ultra lightweight ORM. SmartSql = MyBatis + Cache(Memory | Redis) + R/W Splitting +Dynamic Repository + Diagnostics">
    <meta name="keywords" content="SmartSql, MyBatis ,Cache(Memory | Redis) ,ZooKeeper , R/W Splitting , Dynamic Repository,ORM,DotNet,.Net,dotnet core">
    <link rel="preload" href="/assets/css/0.styles.2272f8e8.css" as="style"><link rel="preload" href="/assets/js/app.7f0b822e.js" as="script"><link rel="preload" href="/assets/js/2.f0de6cf5.js" as="script"><link rel="preload" href="/assets/js/13.3c8cdac2.js" as="script"><link rel="prefetch" href="/assets/js/10.d23fef41.js"><link rel="prefetch" href="/assets/js/11.3173be70.js"><link rel="prefetch" href="/assets/js/12.00fd90ec.js"><link rel="prefetch" href="/assets/js/14.29f7b193.js"><link rel="prefetch" href="/assets/js/15.41fb704e.js"><link rel="prefetch" href="/assets/js/16.054c6069.js"><link rel="prefetch" href="/assets/js/17.278debea.js"><link rel="prefetch" href="/assets/js/18.69165377.js"><link rel="prefetch" href="/assets/js/19.661a7ba4.js"><link rel="prefetch" href="/assets/js/20.b0723794.js"><link rel="prefetch" href="/assets/js/21.171ad768.js"><link rel="prefetch" href="/assets/js/22.78eb6e8e.js"><link rel="prefetch" href="/assets/js/23.8edbdee3.js"><link rel="prefetch" href="/assets/js/24.06f1433e.js"><link rel="prefetch" href="/assets/js/25.dbd8c249.js"><link rel="prefetch" href="/assets/js/26.58464561.js"><link rel="prefetch" href="/assets/js/27.4a33ea03.js"><link rel="prefetch" href="/assets/js/28.02a6c185.js"><link rel="prefetch" href="/assets/js/29.b9d070ca.js"><link rel="prefetch" href="/assets/js/3.da7287ed.js"><link rel="prefetch" href="/assets/js/30.1cff4cee.js"><link rel="prefetch" href="/assets/js/31.6e505c47.js"><link rel="prefetch" href="/assets/js/32.64930bed.js"><link rel="prefetch" href="/assets/js/33.a3bff542.js"><link rel="prefetch" href="/assets/js/34.2ccd7fce.js"><link rel="prefetch" href="/assets/js/35.683f41dd.js"><link rel="prefetch" href="/assets/js/36.a7b51a3f.js"><link rel="prefetch" href="/assets/js/37.29ea3196.js"><link rel="prefetch" href="/assets/js/38.b2009c72.js"><link rel="prefetch" href="/assets/js/39.67b47111.js"><link rel="prefetch" href="/assets/js/4.03454347.js"><link rel="prefetch" href="/assets/js/40.08c3b24c.js"><link rel="prefetch" href="/assets/js/41.96c311cf.js"><link rel="prefetch" href="/assets/js/42.9a5fa5fd.js"><link rel="prefetch" href="/assets/js/43.38ceb0af.js"><link rel="prefetch" href="/assets/js/44.5bf1c228.js"><link rel="prefetch" href="/assets/js/45.7e5d0694.js"><link rel="prefetch" href="/assets/js/46.dbff50bb.js"><link rel="prefetch" href="/assets/js/47.e39d468e.js"><link rel="prefetch" href="/assets/js/48.eef30ad8.js"><link rel="prefetch" href="/assets/js/49.299b8748.js"><link rel="prefetch" href="/assets/js/5.3f3b5b73.js"><link rel="prefetch" href="/assets/js/6.b5cdff4e.js"><link rel="prefetch" href="/assets/js/7.e6032164.js"><link rel="prefetch" href="/assets/js/8.06d8af1f.js"><link rel="prefetch" href="/assets/js/9.a2894045.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2272f8e8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">SmartSql</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/en/config/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en/dyrepository/" class="nav-link">
  Dynamic Repository
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FAQ" class="dropdown-title"><span class="title">FAQ</span> <span class="arrow down"></span></button> <button type="button" aria-label="FAQ" class="mobile-dropdown-title"><span class="title">FAQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/faq/" class="nav-link">
  Common Problems
</a></li><li class="dropdown-item"><!----> <a href="/en/faq/performance-test/" class="nav-link">
  Performance evaluation
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/dotnetcore/SmartSql/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Update history
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Smart-Kit/SmartCode" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SmartCode
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/guide/getting-started.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/Smart-Kit/SmartSql" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/guide/" class="nav-link router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/en/config/" class="nav-link">
  Config Reference
</a></div><div class="nav-item"><a href="/en/dyrepository/" class="nav-link">
  Dynamic Repository
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FAQ" class="dropdown-title"><span class="title">FAQ</span> <span class="arrow down"></span></button> <button type="button" aria-label="FAQ" class="mobile-dropdown-title"><span class="title">FAQ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/en/faq/" class="nav-link">
  Common Problems
</a></li><li class="dropdown-item"><!----> <a href="/en/faq/performance-test/" class="nav-link">
  Performance evaluation
</a></li><li class="dropdown-item"><!----> <a href="https://github.com/dotnetcore/SmartSql/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Update history
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Smart-Kit/SmartCode" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SmartCode
  <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/getting-started.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/en/guide/getting-started.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <a href="https://github.com/Smart-Kit/SmartSql" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/" aria-current="page" class="sidebar-link">Introduced</a></li><li><a href="/en/guide/getting-started.html" aria-current="page" class="active sidebar-link">Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#create-an-smartsql-instance-from-a-connection-string" class="sidebar-link">Create an SmartSql instance from a connection string</a></li><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#create-an-smartsql-instance-from-xml" class="sidebar-link">Create an SmartSql instance from XML</a></li><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#smartsqlbuilder-life-cycle" class="sidebar-link">SmartSqlBuilder life cycle</a></li><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#idbsession" class="sidebar-link">IDbSession</a></li><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#idbsession-cud" class="sidebar-link">IDbSession-CUD</a></li><li class="sidebar-sub-header"><a href="/en/guide/getting-started.html#isqlmapper" class="sidebar-link">ISqlMapper</a></li></ul></li><li><a href="/en/guide/di.html" class="sidebar-link">Dependency Injection</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en/guide/dy-repository.html" class="sidebar-link">Dynamic Agent Repository</a></li><li><a href="/en/guide/type-handler.html" class="sidebar-link">TypeHandler</a></li><li><a href="/en/guide/aop.html" class="sidebar-link">AOP Transaction</a></li><li><a href="/en/guide/id-generator.html" class="sidebar-link">ID Generator</a></li><li><a href="/en/guide/bulk.html" class="sidebar-link">Bulk Insert</a></li><li><a href="/en/guide/redis-cache.html" class="sidebar-link">Redis Distributed caching</a></li><li><a href="/en/guide/skyapm.html" class="sidebar-link">Skywalking Monitoring</a></li><li><a href="/en/guide/get-start-tips.html" class="sidebar-link">Tips for getting started</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="guide"><a href="#guide" class="header-anchor">#</a> Guide</h1> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <h3 id="get-smart-tips-with-nuget-installation-smartsql-schema"><a href="#get-smart-tips-with-nuget-installation-smartsql-schema" class="header-anchor">#</a> Get Smart Tips with Nuget installation SmartSql.Schema</h3> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token function">Install-Package</span> SmartSql<span class="token punctuation">.</span>Schema
</code></pre></div><h3 id="global-installation-schema-get-intellisense"><a href="#global-installation-schema-get-intellisense" class="header-anchor">#</a> Global installation Schema Get intellisense</h3> <p>Download the following two files to the Microsoft Visual Studio XSD installation directory</p> <blockquote><p>VS2017 Directory Address:\Microsoft Visual Studio\2017\Enterprise\Xml\Schemas</p></blockquote> <table><thead><tr><th>文件</th> <th style="text-align:right;">地址</th></tr></thead> <tbody><tr><td>SmartSqlMapConfig.xsd</td> <td style="text-align:right;"><a href="https://raw.githubusercontent.com/Ahoo-Wang/SmartSql/master/doc/Schema/SmartSqlMapConfig.xsd" target="_blank" rel="noopener noreferrer">SmartSqlMapConfig.xsd<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td>SmartSqlMap.xsd</td> <td style="text-align:right;"><a href="https://raw.githubusercontent.com/Ahoo-Wang/SmartSql/master/doc/Schema/SmartSqlMap.xsd" target="_blank" rel="noopener noreferrer">SmartSqlMap.xsd<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <p><img src="/assets/img/intellisense.4bb5c01c.png" alt="intellisense"></p> <div class="language-powershell extra-class"><pre class="language-powershell"><code><span class="token function">Install-Package</span> SmartSql
<span class="token operator">/</span><span class="token operator">/</span> And the corresponding ADO<span class="token punctuation">.</span>NET drive<span class="token punctuation">.</span>
</code></pre></div><h2 id="create-an-smartsql-instance-from-a-connection-string"><a href="#create-an-smartsql-instance-from-a-connection-string" class="header-anchor">#</a> Create an SmartSql instance from a connection string</h2> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> smartSqlBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SmartSqlBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseDataSource</span><span class="token punctuation">(</span>DbProvider<span class="token punctuation">.</span>SQLSERVER<span class="token punctuation">,</span> ConnectionString<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="create-an-smartsql-instance-from-xml"><a href="#create-an-smartsql-instance-from-xml" class="header-anchor">#</a> Create an SmartSql instance from XML</h2> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SmartSqlMapConfig</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://SmartSql.net/schemas/SmartSqlMapConfig.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Settings</span> <span class="token attr-name">IgnoreParameterCase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ParameterPrefix</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$<span class="token punctuation">&quot;</span></span> <span class="token attr-name">IsCacheEnabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ConnectionString<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Data Source=.;Initial Catalog=SmartSqlTestDB;Integrated Security=True<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Database</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DbProvider</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SqlServer<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Write</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WriteDB<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ConnectionString</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${ConnectionString}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Read</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ReadDb-1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ConnectionString</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${ConnectionString}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Weight</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Database</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IdGenerator</span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SnowflakeId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Properties</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WorkerIdBits<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WorkerId<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>888<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Property</span> <span class="token attr-name">Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Sequence<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>14<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IdGenerator</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SmartSqlMaps</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SmartSqlMap</span> <span class="token attr-name">Path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Maps<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Directory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SmartSqlMaps</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SmartSqlMapConfig</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>SmartSqlMap</span> <span class="token attr-name">Scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://SmartSql.net/schemas/SmartSqlMap.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statements</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QueryParams<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>And<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          T.Id = @Id
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>And<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          T.UserName = @UserName
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>And<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ExtendedInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          T.ExtendedInfo = @ExtendedInfo
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Insert<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      INSERT INTO T_User
      (
      Id,
      UserName,
      ExtendedInfo
      )
      VALUES
      (
      @Id,
      @UserName,
      @ExtendedInfo
      );
      Select Scope_Identity();
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Delete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      Delete From T_User
      Where Id=@Id
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Update<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      UPDATE T_User
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsProperty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UserName<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          UserName = @UserName
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsProperty</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsProperty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>,<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ExtendedInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          ExtendedInfo = @ExtendedInfo
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsProperty</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Set</span><span class="token punctuation">&gt;</span></span>
      Where Id=@Id
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Query<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
      SELECT
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Top<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Taken<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        (@Taken)
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
      T.* From T_User T
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Include</span> <span class="token attr-name">RefId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QueryParams<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Switch</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Order By<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>OrderBy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Default</span><span class="token punctuation">&gt;</span></span>
          T.Id Desc
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Default</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Switch</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QueryByPage<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
      Select T.* From T_User T With(NoLock)
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Include</span> <span class="token attr-name">RefId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QueryParams<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
      Order By T.Id Desc
      Offset ((@PageIndex-1)*@PageSize) Rows Fetch Next @PageSize Rows Only;

      Select Count(1) From T_User T
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Include</span> <span class="token attr-name">RefId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>QueryParams<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Statement</span> <span class="token attr-name">Id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>GetEntity<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
      Select Top 1 T.* From T_User T With(NoLock)
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Where</span> <span class="token attr-name">Min</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>IsNotEmpty</span> <span class="token attr-name">Prepend</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>And<span class="token punctuation">&quot;</span></span> <span class="token attr-name">Property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          T.Id=@Id
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>IsNotEmpty</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Where</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statement</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Statements</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>SmartSqlMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> smartSqlBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SmartSqlBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseXmlConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="smartsqlbuilder-life-cycle"><a href="#smartsqlbuilder-life-cycle" class="header-anchor">#</a> SmartSqlBuilder life cycle</h2> <p>The best scope for SmartSqlBuilder is the application scope. You can use single-case mode or static singleton mode.</p> <h2 id="idbsession"><a href="#idbsession" class="header-anchor">#</a> IDbSession</h2> <table><thead><tr><th style="text-align:left;">Function</th> <th style="text-align:right;">Note</th></tr></thead> <tbody><tr><td style="text-align:left;">Execute</td> <td style="text-align:right;">IDbCommand.ExecuteNonQuery</td></tr> <tr><td style="text-align:left;">ExecuteScalar</td> <td style="text-align:right;">IDbCommand.ExecuteScalar</td></tr> <tr><td style="text-align:left;">Query</td> <td style="text-align:right;">Perform a list of returned entities</td></tr> <tr><td style="text-align:left;">QuerySingle</td> <td style="text-align:right;">Perform a return to a single entity</td></tr> <tr><td style="text-align:left;">GetDataTable</td> <td style="text-align:right;">Perform a return DataTable</td></tr> <tr><td style="text-align:left;">GetDataSet</td> <td style="text-align:right;">Perform a return DataSet</td></tr> <tr><td style="text-align:left;">BeginTransaction</td> <td style="text-align:right;">Open a transaction</td></tr> <tr><td style="text-align:left;">CommitTransaction</td> <td style="text-align:right;">Submit a transaction</td></tr> <tr><td style="text-align:left;">RollbackTransaction</td> <td style="text-align:right;">Rolling back transactions</td></tr></tbody></table> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> dbSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SmartSqlBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">UseXmlConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">GetDbSessionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> dbSession <span class="token operator">=</span> dbSessionFactory<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Do Somethings</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="executescalar"><a href="#executescalar" class="header-anchor">#</a> ExecuteScalar</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">ExecuteScalar</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestContext</span>
            <span class="token punctuation">{</span>
                Scope <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">,</span>
                SqlId <span class="token operator">=</span> <span class="token string">&quot;Insert&quot;</span><span class="token punctuation">,</span>
                Request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">User</span>
                <span class="token punctuation">{</span>
                    UserName <span class="token operator">=</span> <span class="token string">&quot;SmartSql&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="execute"><a href="#execute" class="header-anchor">#</a> Execute</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestContext</span>
            <span class="token punctuation">{</span>
                Scope <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">,</span>
                SqlId <span class="token operator">=</span> <span class="token string">&quot;Update&quot;</span><span class="token punctuation">,</span>
                Request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">User</span>
                <span class="token punctuation">{</span>
                    Id<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
                    UserName <span class="token operator">=</span> <span class="token string">&quot;SmartSql&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="query"><a href="#query" class="header-anchor">#</a> Query</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestContext</span>
            <span class="token punctuation">{</span>
                Scope <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">,</span>
                SqlId <span class="token operator">=</span> <span class="token string">&quot;Query&quot;</span><span class="token punctuation">,</span>
                Request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Taken <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="querysingle"><a href="#querysingle" class="header-anchor">#</a> QuerySingle</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">QuerySingle</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestContext</span>
            <span class="token punctuation">{</span>
                Scope <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">,</span>
                SqlId <span class="token operator">=</span> <span class="token string">&quot;GetEntity&quot;</span><span class="token punctuation">,</span>
                Request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> id <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="querybypage"><a href="#querybypage" class="header-anchor">#</a> QueryByPage</h3> <p>Combine multiple return results by passing in ValueTuple.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">QuerySingle</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ValueTuple<span class="token punctuation">&lt;</span>IEnumerable<span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestContext</span>
            <span class="token punctuation">{</span>
                Scope <span class="token operator">=</span> <span class="token keyword">nameof</span><span class="token punctuation">(</span>User<span class="token punctuation">)</span><span class="token punctuation">,</span>
                SqlId <span class="token operator">=</span> <span class="token string">&quot;QueryByPage&quot;</span><span class="token punctuation">,</span>
                Request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> PageSize <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> PageIndex <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="storedprocedure"><a href="#storedprocedure" class="header-anchor">#</a> StoredProcedure</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code>            <span class="token class-name"><span class="token keyword">var</span></span> dbParameterCollection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqlParameterCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            dbParameterCollection<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">SqlParameter</span>
            <span class="token punctuation">{</span>
                Name <span class="token operator">=</span> <span class="token string">&quot;Total&quot;</span><span class="token punctuation">,</span>
                DbType <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>DbType<span class="token punctuation">.</span>Int32<span class="token punctuation">,</span>
                Direction <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>ParameterDirection<span class="token punctuation">.</span>Output
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">RequestContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RequestContext</span>
            <span class="token punctuation">{</span>
                CommandType <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>CommandType<span class="token punctuation">.</span>StoredProcedure<span class="token punctuation">,</span>
                RealSql <span class="token operator">=</span> <span class="token string">&quot;SP_QueryUser&quot;</span><span class="token punctuation">,</span>
                Request <span class="token operator">=</span> dbParameterCollection
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Query</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
            dbParameterCollection<span class="token punctuation">.</span><span class="token function">TryGetParameterValue</span><span class="token punctuation">(</span><span class="token string">&quot;Total&quot;</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">int</span></span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="idbsession-cud"><a href="#idbsession-cud" class="header-anchor">#</a> IDbSession-CUD</h2> <p>IDbSession also provides CUD extension functions to help developers generate good CUD-SQL that are easy for developers to use directly.</p> <h3 id="insert"><a href="#insert" class="header-anchor">#</a> Insert</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> id <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Insert</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">,</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>userEntity<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="update"><a href="#update" class="header-anchor">#</a> Update</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> recordsAffected <span class="token operator">=</span> DbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Update</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">User</span>
            <span class="token punctuation">{</span>
                Id <span class="token operator">=</span> id<span class="token punctuation">,</span>
                UserName <span class="token operator">=</span> <span class="token string">&quot;SmartSql&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dyupdate"><a href="#dyupdate" class="header-anchor">#</a> DyUpdate</h3> <p>The role of the DyUpdate function is that it can be used when only part of the field needs to be updated.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> recordsAffected <span class="token operator">=</span> dbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DyUpdate</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> Id <span class="token operator">=</span> id<span class="token punctuation">,</span> UserName <span class="token operator">=</span> <span class="token string">&quot;SmartSql&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deletebyid"><a href="#deletebyid" class="header-anchor">#</a> DeleteById</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> recordsAffected <span class="token operator">=</span> dbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">,</span> <span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="deletemany"><a href="#deletemany" class="header-anchor">#</a> DeleteMany</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> recordsAffected <span class="token operator">=</span> dbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteMany</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">,</span> <span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> id0<span class="token punctuation">,</span> id1<span class="token punctuation">,</span> id2 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="getbyid"><a href="#getbyid" class="header-anchor">#</a> GetById</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> entity <span class="token operator">=</span> dbSession<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetById</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>User<span class="token punctuation">,</span> <span class="token keyword">long</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="isqlmapper"><a href="#isqlmapper" class="header-anchor">#</a> ISqlMapper</h2> <blockquote><p>The ISqlMapper interface provides interface functions that are consistent with IDbSession, but ISqlMapper does not need to be explicitly created through DbSessionFactory Dbsession,isqlmapper Internal reliance on IDbSessionStore to manage DbSession, the principle of opening/releasing DbSession is: &quot;Who opens and who is responsible for release&quot;.</p></blockquote> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">var</span></span> sqlMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SmartSqlBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">UseXmlConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">GetSqlMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Smart-Kit/SmartSql-Docs/edit/master/docs/en/guide/getting-started.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/28/2019, 3:16:05 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/en/guide/" class="prev router-link-active">
        Introduced
      </a></span> <span class="next"><a href="/en/guide/di.html">
        Dependency Injection
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.7f0b822e.js" defer></script><script src="/assets/js/2.f0de6cf5.js" defer></script><script src="/assets/js/13.3c8cdac2.js" defer></script>
  </body>
</html>
